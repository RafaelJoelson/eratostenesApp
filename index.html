<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experimento Eratóstenes - Projeto de Extensão Astronomia no IF</title>
    <style>
        html {
            width: 100%;
            height: 100%;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        header {
            display: flex;
            width: auto;
            height: 150px;
            margin: 0 auto;
            background: radial-gradient(circle, #19882c, #0A5517);
        }
        header h3, header h4 {
            color: #fff;
            padding: 10px 10px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
        }
        .input-group input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .result {
            padding-top: 5px;
            padding-bottom: 5px;
            font-weight: bold;
        }
        button {
            margin-top: 10px;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <header>
        <div>
            <h3>IF Sudeste MG - Campus São João del-Rei</h3>
            <h4>Experimento Eratóstenes - Projeto de Extensão Astronomia no IF</h4>           
        </div>
    </header>
    <div class="container">
        
        <h2>Dados da Minha Cidade</h2>
        <div class="input-group">
            <label for="nomeCidade1">Nome da Minha Cidade:</label>
            <input type="text" id="nomeCidade1">
            <button onclick="buscarCoordenadas('nomeCidade1', 'latitudeCidade1', 'longitudeCidade1')">Buscar Coordenadas</button>
        </div>
        <div class="input-group">
            <label for="alturaObjeto1">Altura do gnômon da Minha Cidade (mm):</label>
            <input type="number" id="alturaObjeto1" step="any">
        </div>
        <div class="input-group">
            <label for="comprimentoSombra1">Comprimento da sombra da Minha Cidade (mm):</label>
            <input type="number" id="comprimentoSombra1" step="any">
        </div>
        <div class="input-group">
            <label for="latitudeCidade1">Latitude da Minha Cidade (graus):</label>
            <input type="number" id="latitudeCidade1" step="any">
        </div>
        <div class="input-group">
            <label for="longitudeCidade1">Longitude da Minha Cidade (graus):</label>
            <input type="number" id="longitudeCidade1" step="any">
        </div>

        <h2>Dados da Cidade Escolhida</h2>
        <div class="input-group">
            <label for="nomeCidade2">Nome da Cidade Escolhida:</label>
            <input type="text" id="nomeCidade2">
            <button onclick="buscarCoordenadas('nomeCidade2', 'latitudeCidade2', 'longitudeCidade2')">Buscar Coordenadas</button>
        </div>
        <div class="input-group">
            <label for="alturaObjeto2">Altura do gnômon da Cidade Escolhida (mm):</label>
            <input type="number" id="alturaObjeto2" step="any">
        </div>
        <div class="input-group">
            <label for="comprimentoSombra2">Comprimento da sombra da Cidade Escolhida (mm):</label>
            <input type="number" id="comprimentoSombra2" step="any">
        </div>
        <div class="input-group">
            <label for="latitudeCidade2">Latitude da Cidade Escolhida (graus):</label>
            <input type="number" id="latitudeCidade2" step="any">
        </div>
        <div class="input-group">
            <label for="longitudeCidade2">Longitude da Cidade Escolhida (graus):</label>
            <input type="number" id="longitudeCidade2" step="any">
        </div>

        <h2>Dados da Cidade com Sol a Pino</h2>
        <div class="input-group">
            <label for="nomeCidade3">Nome da Cidade com Sol a Pino:</label>
            <input type="text" id="nomeCidade3">
            <button onclick="buscarCoordenadas('nomeCidade3', 'latitudeCidade3', 'longitudeCidade3')">Buscar Coordenadas</button>
        </div>
        <div class="input-group">
            <label for="latitudeCidade3">Latitude da Cidade com Sol a Pino (graus):</label>
            <input type="number" id="latitudeCidade3" step="any">
        </div>
        <div class="input-group">
            <label for="longitudeCidade3">Longitude da Cidade com Sol a Pino (graus):</label>
            <input type="number" id="longitudeCidade3" step="any">
        </div>

        <button onclick="calcular()">Calcular</button>
        <button onclick="limpar()">Limpar</button>

        <div class="result">
            <p id="resultadoAnguloSombra1">Ângulo da sombra da Minha Cidade: </p>
            <p id="resultadoAnguloSombra2">Ângulo da sombra da Cidade Escolhida: </p>
            <p id="resultadoCircunferenciaTerra">Circunferência da Terra: </p>
            <p id="resultadoRaioTerra">Raio da Terra: </p>
        </div>
    </div>

    <script>
        function buscarCoordenadas(nomeCidadeId, latitudeId, longitudeId) {
            const nomeCidade = document.getElementById(nomeCidadeId).value;
            const url = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(nomeCidade)}&format=json&limit=1`;
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.length > 0) {
                        const location = data[0];
                        document.getElementById(latitudeId).value = location.lat;
                        document.getElementById(longitudeId).value = location.lon;
                    } else {
                        alert('Não foi possível encontrar as coordenadas. Verifique o nome da cidade.');
                    }
                })
                .catch(error => {
                    console.error('Erro ao buscar coordenadas:', error);
                    alert('Ocorreu um erro ao buscar as coordenadas.');
                });
        }

        function calcularAnguloSombra(altura, comprimentoSombra) {
            const anguloRad = Math.atan(altura / comprimentoSombra);
            const anguloGraus = anguloRad * (180 / Math.PI);
            return anguloGraus;
        }

        function calcularDistancia(lat1, lon1, lat2, lon2) {
            const R = 6371; // Raio da Terra em km
            const dLat = (lat2 - lat1) * (Math.PI / 180);
            const dLon = (lon2 - lon1) * (Math.PI / 180);
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                      Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *
                      Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            const distancia = R * c;
            return distancia;
        }

        function calcularCircunferencia(distancia, anguloEmGraus) {
            return (360 / anguloEmGraus) * distancia;
        }

        function calcular() {
            const alturaObjeto1 = parseFloat(document.getElementById('alturaObjeto1').value);
            const comprimentoSombra1 = parseFloat(document.getElementById('comprimentoSombra1').value);
            const latitudeCidade1 = parseFloat(document.getElementById('latitudeCidade1').value);
            const longitudeCidade1 = parseFloat(document.getElementById('longitudeCidade1').value);

            const alturaObjeto2 = parseFloat(document.getElementById('alturaObjeto2').value);
            const comprimentoSombra2 = parseFloat(document.getElementById('comprimentoSombra2').value);
            const latitudeCidade2 = parseFloat(document.getElementById('latitudeCidade2').value);
            const longitudeCidade2 = parseFloat(document.getElementById('longitudeCidade2').value);

            const latitudeCidade3 = parseFloat(document.getElementById('latitudeCidade3').value);
            const longitudeCidade3 = parseFloat(document.getElementById('longitudeCidade3').value);

            const anguloSombra1 = calcularAnguloSombra(alturaObjeto1, comprimentoSombra1);
            const anguloSombra2 = calcularAnguloSombra(alturaObjeto2, comprimentoSombra2);

            const distancia1 = calcularDistancia(latitudeCidade1, longitudeCidade1, latitudeCidade3, longitudeCidade3);
            const distancia2 = calcularDistancia(latitudeCidade2, longitudeCidade2, latitudeCidade3, longitudeCidade3);

            const anguloEntreCidades = Math.abs(latitudeCidade1 - latitudeCidade2);

            const circunferenciaTerra = calcularCircunferencia(distancia1, anguloEntreCidades)/10;
            const raioTerra = circunferenciaTerra / (2 * Math.PI);

            document.getElementById('resultadoAnguloSombra1').textContent = `Ângulo da sombra da Minha Cidade: ${anguloSombra1.toFixed(2)} graus`;
            document.getElementById('resultadoAnguloSombra2').textContent = `Ângulo da sombra da Cidade Escolhida: ${anguloSombra2.toFixed(2)} graus`;
            document.getElementById('resultadoCircunferenciaTerra').textContent = `Circunferência da Terra: ${circunferenciaTerra.toFixed(2)} km`;
            document.getElementById('resultadoRaioTerra').textContent = `Raio da Terra: ${raioTerra.toFixed(2)} km`;
        }

        function limpar() {
            const campos = document.querySelectorAll('input[type="text"], input[type="number"]');
            campos.forEach(campo => campo.value = '');

            document.getElementById('resultadoAnguloSombra1').textContent = 'Ângulo da sombra da Minha Cidade:';
            document.getElementById('resultadoAnguloSombra2').textContent = 'Ângulo da sombra da Cidade Escolhida:';
            document.getElementById('resultadoCircunferenciaTerra').textContent = 'Circunferência da Terra:';
            document.getElementById('resultadoRaioTerra').textContent = 'Raio da Terra:';
        }
    </script>
</body>
</html>
